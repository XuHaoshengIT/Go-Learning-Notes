# 常量和变量

下面就为大家介绍两种最常见的用来储存数据的标识符：**常量** 和 **变量** 。

## 常量

- 关键字：`const` ；用来储存**不会改变的数据** 。


- 允许存入的数据类型：布尔型（`bool`）、数字型（整数型（`int`）、浮点型（`float`）、复数（`complex`））和字符串型（）。
- 定义格式：`const identifier type = value` ,例如：

```go
const Pi float32 = 3.14159
```

- 在Go语言中的两种类型定义：


- - 显式类型定义：`const b string = "abc"` 
- - 隐式类型定义：`const b = "abc"` （编译器会根据环境推断它的类型）



常量的值必须在编译时能够确定，可以涉及计算过程，但不可以通过*自定义函数*等方式获得一个值：

`const c1 = getNumber()` 是 错误的。不过一些内置函数还是可以使用的，如：len()。

**数字型的常量**是没有大小和符号的，而且可以使用任何精度而不会导致溢出：

```go
const Ln2= 0.693147180559945309417232121458\
			176568075500134360255254120680009
const Log2E= 1/Ln2 // this is a precise reciprocal
const Billion = 1e9 // float constant
const hardEight = (1 << 100) >> 97
```

```
p.s：反斜杠"\"可以在常量表达式中作为多行的连接符使用。
```

常量允许使用*并行赋值* 和*枚举* ：

```go
const beef, two, c = "eat", 2, "veg"
const Monday, Tuesday, Wednesday, Thursday, Friday, Saturday = 1, 2, 3, 4, 5, 6
const (
	Monday, Tuesday, Wednesday = 1, 2, 3
	Thursday, Friday, Saturday = 4, 5, 6
)

const (
	Unknown = 0
	Female = 1
	Male = 2
)
```

```
p.s：并行赋值时，对于没有赋值操作的常量重复前排的操作，即重复最后一个有操作赋值的常量的操作。
```



### iota：常量计数器

1. 只能用于`const` 操作表达式
2. 出现`const` 后的第n行的`iota` 的值为n-1，每增加一行`iota` 递增1
3. `iota` 只有出现在新的枚举体里才会重置为0！
4. 如果想空出某一个值的时候，则用`_` 取代改行

```go
const (
	C1 = iota     // C1 = 0
  	C2            // C2 = 1
  	C3            // C3 = 2
)

const (
	C1 = iota     // C1 = 0
  	c2 = iota + 1 // C2 = 2
  	c3 = iota     // C3 = 2
)

const (
	C1 = iota     // C1 = 0
  	_
  	C2            // C2 = 2
)
```

关于`iota` 的使用非常多样，我在这里也只是大概讲解几种用法，毕竟我在后续开发的过程中暂时没有用过，所以暂时不做过多阐述，如果想了解更多，可以看一下这个视频教程：[《Go编程基础》 第四课：常量与运算符 ](https://github.com/Unknwon/go-fundamental-programming) 。



----

## 变量

### 基本概念

- 关键字：`var` ；格式：`var identifier type = value` 。如：`var a int =1` ,有时候定义变量时可以先不确定数据类型（系统会自动推断，但不一定是你想要的），或者不赋值，但这两个不可同时没有。注意：Go语言在声明变量时是将类型（`type`）放在变量名的后面！

- 支持*因式分解关键字* 的写法，这种方法一般用在声明全局变量：

  ````go
  var (
  	a int
  	b bool
  	c string
  )
  ````

- 当声明一个无值变量的时候，系统会自动赋予它初始值：`int`为0、`float`为0.0 、`bool`为false 、`string`为""、指针为nil。

- 命名原则：**骆驼命名法** ，即首个单词小写，每个新单词的首字母大写。不过，如果你希望你声明的全局变量被外部包所调用，则需要首字母大写。

**注意：**1.一般情况下，当变量a和变量b之间类型相同时，才能进行如 `a = b` 的赋值。

​		 2.如果你想要交换两个变量的值，则可以简单地使用 `a, b = b, a` 。

#### 作用域

变量按照*作用域* 可以分为两种：**局部变量**和**全局变量** ；

- **局部变量**：在函数体内部使用，它们的有效适用范围只有所在的代码块里，此时可以用简短的声明语法：`:=` ，例如：`a := 1` .	

> 尽管变量的标识符必须是唯一的，但你可以在某个代码块的内层代码块中使用相同名称的变
> 量，则此时外部的同名变量将会暂时隐藏（结束内部代码块的执行后隐藏的外部同名变量又
> 会出现，而内部同名变量则被释放），你任何的操作都只会影响内部代码块的局部变量。

**注意：**1.在相同的代码块里，我们不可以再次对于相同名称的变量使用*初始化声明*。

​		 2.单纯地给 a 赋值也是不够的，这个值必须被使用，所以使用 `fmt.Println("hello,world", a)` 会报错。

- **全局变量** ：在整个文件中都可以使用的标识符，如果名字的首字母是大写的话，还可以被外部包调用，一般放在`import` 语句后面声明。



### 打印

`Printf` 是`fmt` 包的一个函数，用来将数据打印输出到控制台，打印的数据必须要**格式化** 。将数据格式化的方式就是利用相关的格式化标识符，形式为`%..` ,如：

```
%d：整数；											%t：布尔型；
%g：浮点型（输出数据应有的精确度）；				%f：浮点型（只输出小数点后六位）；
%x/%X：16进制表示的数；							%e：科学计数表示法
%s：字符串；
```

这里只列举一些常见的标识符，如果想了解更多的标识符，Google去吧。

```go
package main

import (
	"fmt"
)

const (
	C1 float32 = 0.123456789
	C2 float64 = 0.123456789
	C3 = iota
	C4 = 0x1254dfec
)

func main() {
  fmt.Printf("The value of the constants are: %f, %g, %f, %d, %x", C1, C2, C2, C3, C4)
}

// 输出的结果为：The value of the constants are: 0.12345679, 0.123456789, 0.123457, 2, 1254dfec

```





### init函数

- 这是一个特殊的函数，每个程序里有且仅有一个该函数，优先级要高于main函数，并且不能被人为调用。
- 变量除了可以在全局声明中初始化，也可以在init函数中初始化
- 一个可能的用途是在开始执行程序之前对数据进行检验或修复，以保证程序状态的正确性。




----

## List

- 上一节：
- 下一节：
- 目    录：

